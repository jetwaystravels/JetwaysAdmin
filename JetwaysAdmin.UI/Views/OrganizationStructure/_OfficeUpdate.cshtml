@using JetwaysAdmin.Entity
@model JetwaysAdmin.UI.ViewModel.MenuHeaddata
@{
    var Data = Model;
    var countryData = ViewBag.CountryList as List<Country> ?? new List<Country>();

    var firstEntity = Model?.LegalEntitydata?.FirstOrDefault();
    var firstLoc = Model?.LocationandTax?.FirstOrDefault();

    string selectedGender = firstEntity?.Gender;
    string selectedAccountType = firstEntity?.AccountType;
    string selectedFinancialType = firstEntity?.FinancialType;
    string selectedAssignIATAGroup = firstEntity?.AssignIATAGroup;
    string selectedCountry = firstEntity?.Country;
    string selectedState = firstEntity?.State;
    string selectedCity = firstEntity?.City;
    string selectedCustomerBaseCurrency = firstEntity?.CustomerBaseCurrency;
    string selectedCustomerBaseCountry = firstEntity?.CustomerBaseCountry;

    // Dates standardized to yyyy-MM-dd for inputs
    string activationDate = firstEntity?.AcountActivationDate?.ToString("yyyy-MM-dd");
    string deactivationDate = firstEntity?.AccountDeactivationDate?.ToString("yyyy-MM-dd");
}

<div class="box-ht">
    <div class="tab-content">
        <div class="tab-pane active" id="OrganizationUpdate" role="tabpanel">
            <form class="form-row form-material" asp-controller="OrganizationStructure" asp-action="EditOffice" method="post">
                <input type="hidden" id="parentLegalEntityCode" name="ParentLegalEntityCode" class="form-control" value="@ViewBag.LegalEntityCode">
                <input type="hidden" name="Id" class="form-control" value="@firstEntity?.Id">
                <input type="hidden" name="IdLegal" class="form-control" value="@ViewBag.Id">
                <div class="form-group form-primary col-md-6">
                    <select name="OfficeType" id="officeType" class="form-control fill">
                        <option value="">Please Select</option>
                        <option value="BR">Branch Office</option>
                        <option value="RA">Regional Office</option>
                    </select>
                    <span class="form-bar"></span>
                    <label class="float-label">Office Type</label>
                </div>
                <div class="form-group form-primary col-md-6">
                    <input type="text" name="LegalEntityName" maxlength="80" class="form-control" oninput="validateLegalEntityName(this)" value="@firstEntity?.LegalEntityName">
                    <span class="form-bar"></span>
                    <label class="float-label">Office Entity Name<span>*</span></label>
                    <span id="legalEntityNameError" style="color: red; font-size: 12px;"></span>
                </div>

                <div class="form-group form-primary col-md-3">
                    <select name="FinancialType" id="financialType" class="form-control fill" required>
                        @if (!string.IsNullOrWhiteSpace(selectedFinancialType))
                        {
                            <option value="@selectedFinancialType">@selectedFinancialType</option>
                        }
                        <option value="SE">Use Office’s Own Financial Code</option>
                        <option value="SO">Use Office’s Own Code (Linked to Head Office)</option>
                        <option value="HO">Use Head Office Financial Code</option>
                    </select>
                    <span class="form-bar"></span>
                    <label class="float-label">Financial Type</label>
                </div>

                <div class="form-group form-primary col-md-3">
                    <input type="text" name="LegalEntityCode" value="@firstEntity?.LegalEntityCode" id="legalEntityCode" maxlength="10"
                           oninput="this.value = this.value.replace(/\s/g, ''); validateLegalEntityCode(this)" class="form-control">
                    <span class="form-bar"></span>
                    <label class="float-label">Financial Office Code</label>
                    <span id="legalEntityCodeError" style="color: red; font-size: 12px;"></span>
                </div>

                <div class="form-group form-primary col-md-6">
                    <input type="text" name="FinancialPersonalCode" value="@firstEntity?.FinancialPersonalCode" id="financialpersonal" maxlength="10"
                           oninput="this.value = this.value.replace(/\s/g, ''); validateLegalEntityCode(this)" class="form-control">
                    <span class="form-bar"></span>
                    <label class="float-label">Financial Personal Code</label>
                    <span id="financialpersonalcodeError" style="color: red; font-size: 12px;"></span>
                </div>

                <div class="form-group form-primary col-md-6">
                    <select name="GSTLocationID" class="form-control fill" required>
                        @if (firstLoc != null)
                        {
                            <option value="@firstLoc.LocationID">@firstLoc.LocationName</option>
                        }
                        @foreach (var location in Model.LocationandTax ?? Enumerable.Empty<LocationsandTax>())
                        {
                            <option value="@location.LocationID">@location.LocationName</option>
                        }
                    </select>
                    <span class="form-bar"></span>
                    <label class="float-label">GST Location<span>*</span></label>
                </div>

                <div class="form-group form-primary col-md-6">
                    <input type="text" Name="ParentLegalEntityName" class="form-control" value="@ViewBag.LegalEntityName" readonly />
                    <span class="form-bar"></span>
                    <label class="float-label">Parent Legal Entity Name</label>
                </div>

                <div class="form-group form-primary col-md-6">
                    <select name="AssignIATAGroup" class="form-control fill">
                        @if (!string.IsNullOrWhiteSpace(selectedAssignIATAGroup))
                        {
                            if (selectedAssignIATAGroup == "1")
                            {
                                <option value="@selectedAssignIATAGroup">Delhi</option>
                            }
                            else if (selectedAssignIATAGroup == "2")
                            {
                                <option value="@selectedAssignIATAGroup">Mumbai</option>
                            }
                            else if (selectedAssignIATAGroup == "3")
                            {
                                <option value="@selectedAssignIATAGroup">Pune</option>
                            }
                            else if (selectedAssignIATAGroup == "4")
                            {
                                <option value="@selectedAssignIATAGroup">Gurgaon</option>
                            }

                        }

                        @foreach (var iata in Model.IATAGruopName)
                        {
                            <option value="@iata.GroupID">@iata.GroupName</option>
                        }
                    </select>
                    <span class="form-bar"></span>
                    <label class="float-label">Assign IATA Group</label>
                </div>

                <div class="form-group form-primary col-md-6">
                    <input type="text" name="CorporateAccountsCode" maxlength="15" value="@firstEntity?.CorporateAccountsCode" id="corporateCode" oninput="this.value = this.value.replace(/\s/g, ''); validateCorpCode(this)" class="form-control">
                    <span class="form-bar"></span>
                    <label class="float-label">Corporate Accounts Code</label>
                    <span id="CorporateCodeError" style="color: red; font-size: 12px;"></span>
                </div>

                <div class="form-group form-primary col-md-6">
                    <input type="text" name="FirstName" value="@firstEntity?.FirstName" class="form-control">
                    <span class="form-bar"></span>
                    <label class="float-label">First Name</label>
                    <span id="firstNameError" style="color: red; font-size: 12px;"></span>
                </div>

                <div class="form-group form-primary col-md-6">
                    <input type="text" name="LastName" id="lName" minlength="3" value="@firstEntity?.LastName" maxlength="15" oninput="nameValidate(this)" class="form-control">
                    <span class="form-bar"></span>
                    <label class="float-label">Last Name</label>
                    <span id="lastNameError" style="color: red; font-size: 12px;"></span>
                </div>

                <div class="form-group form-primary col-md-6">
                    <input type="text" name="BussinesEmail" id="businessEmailInput" maxlength="30" value="@firstEntity?.BussinesEmail" class="form-control" autocomplete="new-email" oninput="validateBusinessEmail(this)">
                    <span class="form-bar"></span>
                    <label class="float-label">Business Email ID</label>
                    <span id="emailBusinesError" style="color: red; font-size: 12px;"></span>
                </div>

                <div class="form-group form-primary col-md-6">
                    <input type="password" name="Password" minlength="8" maxlength="25" value="@firstEntity?.Password" class="form-control pw-eye" autocomplete="new-password" aria-label="Password (click eye to show/hide)"
                           data-eye="true" data-eye-size="20" data-eye-pad="10">
                    <span class="form-bar"></span>
                    <label class="float-label">Password</label>
                </div>

                <div class="form-group form-primary col-md-2">
                    <select class="select form-control fill" name="CountryPhoneCode">
                        <option value="IN">IN (+91)</option>
                        <option value="AF">AF (+93)</option>
                        <option value="AL">AL (+355)</option>
                        <option value="DZ">DZ (+213)</option>
                        <option value="AO">AO (+244)</option>
                        <option value="AR">AR (+54)</option>
                        <option value="AM">AM (+374)</option>
                        <option value="AW">AW (+297)</option>
                        <option value="AU">AU (+61)</option>
                        <option value="AZ">AZ (+994)</option>
                    </select>
                    <span class="form-bar"></span>
                    <label class="float-label">Country Code</label>
                </div>

                <div class="form-group form-primary col-md-4">
                    <input type="text" name="MobileNumber" id="mobileInput" maxlength="10" value="@firstEntity?.MobileNumber" class="form-control" oninput="validateMobile(this)">
                    <span class="form-bar"></span>
                    <label class="float-label">Mobile Number</label>
                    <span id="mobileError" style="color:red; font-size:12px;"></span>
                </div>

                <div class="form-group form-primary col-md-6">
                    <select name="Gender" class="form-control fill">
                        @if (!string.IsNullOrWhiteSpace(selectedGender))
                        {
                            <option value="@selectedGender">@selectedGender</option>
                        }
                        <option value="Male">Male</option>
                        <option value="Female">Female</option>
                    </select>
                    <span class="form-bar"></span>
                    <label class="float-label">Gender</label>
                </div>

                <div class="form-group form-primary col-md-6">
                    <input type="text" name="AddressLine1" maxlength="40" value="@firstEntity?.AddressLine1" class="form-control" id="addressLine1" oninput="validateAddressLine1(this)">
                    <span class="form-bar"></span>
                    <label class="float-label">Address Line 1<span>*</span></label>
                    <span id="addressError1" style="color:red; font-size:12px;"></span>
                </div>

                <div class="form-group form-primary col-md-6">
                    <input type="text" name="AddressLine2" maxlength="40" value="@firstEntity?.AddressLine2" class="form-control" id="addressLine2" oninput="validateAddressLine2(this)">
                    <span class="form-bar"></span>
                    <label class="float-label">Address Line 2<span>*</span></label>
                    <span id="addressError2" style="color:red; font-size:12px;"></span>
                </div>

                <div class="form-group form-primary col-md-6">
                    <select id="CountryId" name="Country" class="form-control fill" onchange="loadStates()">
                        @if (!string.IsNullOrWhiteSpace(selectedCountry))
                        {
                            <option value="@selectedCountry">@selectedCountry</option>
                        }
                        @foreach (var country in countryData)
                        {
                            <option value="@country.CountryName">@country.CountryName</option>
                        }
                    </select>
                    <span class="form-bar"></span>
                    <label class="float-label">Country<span>*</span></label>
                </div>

                <div class="form-group form-primary col-md-6">
                    <select id="StateId" name="State" class="form-control fill" onchange="loadCities()">
                        @if (!string.IsNullOrWhiteSpace(selectedState))
                        {
                            <option value="@selectedState">@selectedState</option>
                        }
                    </select>
                    <span class="form-bar"></span>
                    <label class="float-label">State<span>*</span></label>
                </div>

                <div class="form-group form-primary col-md-6">
                    <select id="CityId" name="City" class="form-control fill">
                        @if (!string.IsNullOrWhiteSpace(selectedCity))
                        {
                            <option value="@selectedCity">@selectedCity</option>
                        }
                    </select>
                    <span class="form-bar"></span>
                    <label class="float-label">City<span>*</span></label>
                </div>

                <div class="form-group form-primary col-md-6">
                    <input type="text" name="PostalCode" maxlength="6" id="postalCodeInput" value="@firstEntity?.PostalCode" oninput="this.value = this.value.replace(/\s/g, ''); validatePostalCode(this)" class="form-control">
                    <span class="form-bar"></span>
                    <label class="float-label">Postal Code<span>*</span></label>
                    <span id="postalCodeError" style="color:red; font-size:12px;"></span>
                </div>

                <div class="form-group form-primary col-md-6">
                    <select name="AccountType" class="form-control fill">
                        @if (!string.IsNullOrWhiteSpace(selectedAccountType))
                        {
                            <option value="@selectedAccountType">@selectedAccountType</option>
                        }
                        <option value="Business">Business</option>
                        <option value="Personal">Personal</option>
                    </select>
                    <span class="form-bar"></span>
                    <label class="float-label">Account Type<span>*</span></label>
                </div>

                <div class="form-group form-primary col-md-6">
                    <input type="text" name="IntegrationRefNumber" id="integrationRefInput" value="@firstEntity?.IntegrationRefNumber" maxlength="20" oninput="this.value = this.value.replace(/\s/g, ''); validateIntegrationRef(this)" class="form-control">
                    <span class="form-bar"></span>
                    <label class="float-label">Integration Ref. Number</label>
                    <span id="integrationRefError" style="color: red; font-size: 12px;"></span>
                </div>

                <div class="form-group form-primary col-md-6">
                    <select name="CustomerBaseCurrency" class="select form-control fill" id="currencySelect" onchange="updateCurrencyDisplay()">
                        @if (!string.IsNullOrWhiteSpace(selectedCustomerBaseCurrency))
                        {
                            <option value="@selectedCustomerBaseCurrency">@selectedCustomerBaseCurrency</option>
                        }
                        @foreach (var country in countryData)
                        {
                            <option value="@country.CountryName">@country.CountryName</option>
                        }
                    </select>
                    <span class="form-bar"></span>
                    <label class="float-label">Customer Base Currency<span>*</span></label>
                </div>

                <div class="form-group form-primary col-md-6">
                    <select name="CustomerBaseCountry" class="select form-control fill">
                        @if (!string.IsNullOrWhiteSpace(selectedCustomerBaseCountry))
                        {
                            <option value="@selectedCustomerBaseCountry">@selectedCustomerBaseCountry</option>
                        }
                        @foreach (var country in countryData)
                        {
                            <option value="@country.CountryName">@country.CountryName</option>
                        }
                    </select>
                    <span class="form-bar"></span>
                    <label class="float-label">Customer Base Country<span>*</span></label>
                </div>

                <div class="form-group form-primary col-md-6">
                    <input name="TravelDeskEmail" id="travelDeskEmailInput" maxlength="30" value="@firstEntity?.TravelDeskEmail" class="form-control" type="text" oninput="validateDeskEmail(this)">
                    <span class="form-bar"></span>
                    <label class="float-label">Travel Desk Email<span>*</span></label>
                    <span id="emailDeskError" style="color: red; font-size: 12px;"></span>
                </div>

                <div class="form-group form-primary col-md-6">
                    <input name="AcountActivationDate" class="form-control date-main" value="@activationDate"
                           id="activadate" type="date" onfocus="restrictActivationDate()" onchange="setMinDeactivationDate()" autocomplete="off">
                    <span class="form-bar"></span>
                    <label class="float-label">Account Activation Date</label>
                </div>

                <div class="form-group form-primary col-md-6">
                    <input name="AccountDeactivationDate" class="form-control date-main" id="deactivatedate" value="@deactivationDate" type="date" onfocus="restrictDeactivationDate()" autocomplete="off">
                    <span class="form-bar"></span>
                    <label class="float-label">Account De-activation Date</label>
                </div>

                <div class="form-group form-primary col-md-6">
                    <strong>GST Applicable on Management Fee</strong>
                    <label class="switch m-l-5">
                        <input type="checkbox" name="GSTApplicableManagementFee"
                        @(firstEntity?.GSTApplicableManagementFee == true ? "checked" : "") />
                        <span class="slider round"></span>
                    </label>
                </div>

                <div class="form-group form-primary col-md-6">
                    <strong>Pass GST Details to the Airline</strong>
                    <label class="switch m-l-5" style="vertical-align: -webkit-baseline-middle;">
                        <input type="checkbox" name="PassGSTDetailsAirline"
                        @(firstEntity?.PassGSTDetailsAirline == true ? "checked" : "") />
                        <span class="slider round"></span>
                    </label>
                </div>

                <div class="form-check form-check-inline col-md-4">
                    <label class="radio_lb">
                        <input class="form-check-input" type="radio" name="CreateNewGDSProfile" value="true"
                        @(firstEntity?.CreateNewGDSProfile == true ? "checked" : "")>
                        Create new GDS profile
                    </label>
                </div>

                <div class="form-check form-check-inline col-md-6">
                    <label class="radio_lb">
                        <input class="form-check-input" type="radio" name="UpdateExistingCustomerProfile" value="true"
                        @(firstEntity?.UpdateExistingCustomerProfile == true ? "checked" : "")>
                        Update existing customer profile
                    </label>
                </div>

                <div class="form-group form-primary col-md-12 m-t-10" style="border-top:1px solid #dee2e6;"></div>

                <div class="form-group form-primary col-md-4 U-select mb-0">
                    <div class="dropdown">
                        <div class="m-b-15" style="font-size:13px;">Location Head</div>
                        <div class="m-l-0 m-b-10" onclick="toggleDropdown(event)">
                            <i class="fa fa-user-plus m-r-10" aria-hidden="true" style="color: #0e93d8;"></i> Assign Location Head
                        </div>
                        <div class="selected-items"></div>
                    </div>
                </div>

                <div class="form-group form-primary col-md-4 U-select mb-0">
                    <div class="dropdown">
                        <div class="m-b-15" style="font-size:13px;">Location Manager1</div>
                        <div class="m-l-0 m-b-10" onclick="toggleDropdown(event)">
                            <i class="fa fa-user-plus m-r-10" aria-hidden="true" style="color: #0e93d8;"></i> Assign Location Manager1
                        </div>
                        <div class="selected-items"></div>
                    </div>
                </div>

                <div class="form-group form-primary col-md-4 U-select mb-0">
                    <div class="dropdown">
                        <div class="m-b-15" style="font-size:13px;">Location Manager2</div>
                        <div class="m-l-0 m-b-10" onclick="toggleDropdown(event)">
                            <i class="fa fa-user-plus m-r-10" aria-hidden="true" style="color: #0e93d8;"></i> Assign Location Manager2
                        </div>
                        <div class="selected-items"></div>
                    </div>
                </div>

                <div class="form-group form-primary col-md-12">
                    <input type="file" name="upload-logo" class="form-control" placeholder="Logo" accept=".jpg,.jpeg,.png">
                    <span class="form-bar"></span>
                    <span style="font-size:11px;font-weight:500;">Upload logo Allowed formats: .JPG / .PNG, Maximum file size: 1mb, Resolution 200px x 90px</span>
                </div>

                <button id="updateUser" class="btn btn-primary waves-effect waves-light">Update Office</button>
            </form>
        </div>
        <div class="tab-pane" id="suppliersdealcodeUpdate" role="tabpanel">
            <div class="pcoded-inner-content">
                <!-- Main-body start -->
                <div class="main-body">
                    <h6>Suppliers & Deal Code</h6>
                    <div class="page-wrapper" style="padding:0; overflow-x: hidden;">
                        <!-- Page-body start -->
                        <div class="page-body">
                            <!-- Nav tabs -->
                            <div class="m-b-25">
                                <ul class="nav nav-tabs" role="tablist">
                                    <li class="nav-item">
                                        <a class="nav-link active" data-toggle="tab" href="#flights1" role="tab">Flights</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" data-toggle="tab" href="#hotel1" role="tab">Hotel</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" data-toggle="tab" href="#bus1" role="tab">Bus</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" data-toggle="tab" href="#cabs1" role="tab">Cabs</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" data-toggle="tab" href="#visa1" role="tab">Visa</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" data-toggle="tab" href="#forex1" role="tab">Forex</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" data-toggle="tab" href="#insurances1" role="tab">Insurance</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" data-toggle="tab" href="#rail1" role="tab">Rail</a>
                                    </li>
                                </ul>
                            </div>
                            <!-- Tab panes -->
                            <div class="tab-content">
                                <!--  Suppliers manage start -->
                                <div class="tab-pane active" id="flights1" role="tabpanel">
                                    <div class="default-content">
                                        <div class="d-flex justify-content-between m-b-15" style="width:320px;">
                                            <h5>Manage Flights Suppliers?</h5>
                                            <label class="switch">
                                                <input type="checkbox" checked>
                                                <span class="slider round"></span>
                                            </label>
                                        </div>
                                        <div class="row">
                                            <!-- flight start -->
                                            @foreach (var dealCode in Model.getsupplier)
                                            {
                                                <div class="col-md-3">
                                                    <div class="card">
                                                        <div class="card-block" onclick="event.stopPropagation();">
                                                            <div class="d-flex bdr sup-bx" style="cursor:pointer;" onclick="navigateToCredential(this)" data-supplierid="@dealCode.SupplierId"
                                                                 data-legalcode="@ViewBag.LegalEntityCode"
                                                                 data-legalname="@ViewBag.LegalEntityName">
                                                                @if (dealCode.Logo != null)
                                                                {
                                                                    <img class="img-fluid img-h" src="data:image/png;base64,@Convert.ToBase64String(dealCode.Logo)" alt="logo">
                                                                }
                                                                <h6 class="m-t-10 m-l-10">
                                                                    @dealCode.CarrierType
                                                                    <p class="light-gray">@dealCode.SupplierName</p>
                                                                </h6>
                                                                <input type="hidden" name="SupplierId" value="@dealCode.SupplierId" />
                                                                <input type="hidden" name="LegalEntityCode" value="@ViewBag.LegalEntityCode" />
                                                                <input type="hidden" name="LegalEntityName" value="@ViewBag.LegalEntityName" />
                                                            </div>
                                                            <div class="d-flex justify-content-between">
                                                                <p class="m-b-0 light-gray">Last updated:@dealCode.ModifyDate.ToString("dd-MM-yyyy")</p>
                                                                @foreach (var officeCode in Model.LegalEntitydata)
                                                                {
                                                                    <form id="appStatusForm_@dealCode.SupplierId">
                                                                        <input type="hidden" name="SupplierId" value="@dealCode.SupplierId" />
                                                                        <input type="hidden" name="legalEntityCodeparent" value="@ViewBag.LegalEntityCode" />
                                                                        <input type="hidden" name="LegalEntityCode" value="@officeCode.LegalEntityCode" />
                                                                        <input type="hidden" name="LegalEntityName" value="@ViewBag.LegalEntityName" />

                                                                        <label class="switch">
                                                                            <input type="checkbox" name="AppStatus" value="true"
                                                                                   id="appStatusCheckbox_@dealCode.SupplierId"
                                                                            @(((dealCode.IsActive == true)) ? "checked" : "") />
                                                                            <span class="slider round"></span>
                                                                        </label>
                                                                    </form>
                                                                }
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            }
                                            <!-- flight card end -->
                                        </div>
                                    </div>
                                    <div class="new-spplier" style="display:none;">
                                        <div class="modal-body" id="credentialModalBody">
                                            <div class="p-4 text-center" id="credentialModalLoading">Loading…</div>
                                        </div>
                                    </div>
                                    <div class="supplier-content" style="display: none;">
                                        <h5 class="m-b-10">
                                            <a href="supplieranddealcodes.html" style="position: relative; z-index: 10;"><i class="fa fa-arrow-left mr-2" aria-hidden="true" style="vertical-align: text-top;"></i></a>Add New Supplier for Flights
                                        </h5>
                                        <div class="text-center m-t-10">
                                            <img class="img-fluid" src="assets/images/no-data-img.png" alt="image">
                                            <div>No data found, please add new record</div>
                                            <div><button class="btn sml-btn-danger waves-effect waves-light">+ Add New</button></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane" id="hotel1" role="tabpanel">
                                    <div class="d-flex justify-content-end m-b-10 flex-btn">
                                        <div><button class="btn btn-danger add-btn">+ Add New</button></div>
                                    </div>
                                    <div class="default-content">
                                        <div class="d-flex justify-content-between m-b-15" style="width:320px;">
                                            <h6>Manage Hotel Suppliers?</h6>
                                            <label class="switch">
                                                <input type="checkbox" checked>
                                                <span class="slider round"></span>
                                            </label>
                                        </div>
                                        <div class="row">
                                            <!-- hotel start -->
                                            <div class="col-md-4">
                                                <div class="card">
                                                    <div class="card-block">
                                                        <div class="d-flex bdr sup-bx">
                                                            <img class="img-fluid img-h" src="assets/images/hotel-logo/hotel-1.png" alt="logo">
                                                            <h6 class="m-t-10 m-l-10">Travel Boutique Hotels <p class="light-gray">Hotel</p></h6>

                                                        </div>
                                                        <div class="d-flex justify-content-between">
                                                            <p class="m-b-0 light-gray">Last updated:15-01-2025</p>
                                                            <label class="switch">
                                                                <input type="checkbox" checked>
                                                                <span class="slider round"></span>
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="card">
                                                    <div class="card-block">
                                                        <div class="d-flex bdr sup-bx">
                                                            <img class="img-fluid img-h" src="assets/images/hotel-logo/hotel-2.png" alt="logo">
                                                            <h6 class="m-t-10 m-l-10">HOTEL BEDS <p class="light-gray">Hotel</p></h6>

                                                        </div>
                                                        <div class="d-flex justify-content-between">
                                                            <p class="m-b-0 light-gray">Last updated : 27-11-2024</p>
                                                            <label class="switch">
                                                                <input type="checkbox" checked>
                                                                <span class="slider round"></span>
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-md-4">
                                                <div class="card">
                                                    <div class="card-block">
                                                        <div class="d-flex bdr sup-bx">
                                                            <img class="img-fluid img-h" src="assets/images/hotel-logo/hotel-3.png" alt="logo">
                                                            <h6 class="m-t-10 m-l-10">RateHawk <p class="light-gray">Hotel</p></h6>

                                                        </div>
                                                        <div class="d-flex justify-content-between">
                                                            <p class="m-b-0 light-gray">Last updated : 21-11-2024</p>
                                                            <label class="switch">
                                                                <input type="checkbox" checked>
                                                                <span class="slider round"></span>
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- hotel card end -->
                                        </div>
                                    </div>
                                    <div class="supplier-content" style="display:none;">
                                        <h6 class="m-b-20">
                                            <a href="#" style="position: relative; z-index: 10;"><i class="fa fa-arrow-left mr-2" aria-hidden="true" style="vertical-align: text-top;"></i></a>Add New Supplier for Hotel
                                        </h6>
                                        <div class="col-md-3 p-l-0">
                                            <div class="card">
                                                <div class="card-block sup-bx">
                                                    <div class="bdr text-center">
                                                        <img class="img-fluid img-h" src="assets/images/hotel-logo/hotel-4.png" alt="logo">
                                                    </div>
                                                    <div class="d-flex justify-content-between">
                                                        <p>Yatra<br /><span class="m-b-0 light-gray">Hotels</span></p>
                                                        <p><input class="m-t-5" type="checkbox" value=""></p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="m-t-20">
                                            <button class="btn btn-primary waves-effect waves-light">Add</button>
                                            <button class="btn btn-danger waves-effect waves-light">Cancel</button>
                                        </div>
                                    </div>

                                    <div class="new-spplier" style="display:none;">
                                        <h5 class="m-b-20">
                                            <a href="supplieranddealcodes.html" style="position: relative; z-index: 10;"><i class="fa fa-arrow-left mr-2" aria-hidden="true" style="vertical-align: text-top;"></i></a>Supplier : Travel Boutique Hotels
                                        </h5>
                                        <div class="row">
                                            <div class="col-lg-12 mx-auto">
                                                <!-- Accordion -->
                                                <div id="accordionMainone" class="accordion shadow">
                                                    <!-- Accordion item 1 -->
                                                    <div class="card">
                                                        <div id="headingfour" class="bg-white shadow-sm border-0">
                                                            <h2 class="mb-0">
                                                                <button type="button" data-toggle="collapse" data-target="#collapsefour" aria-expanded="true"
                                                                        aria-controls="collapsefour"
                                                                        class="btn btn-link text-dark font-weight-bold collapsible-link">
                                                                    Credentials
                                                                </button>
                                                            </h2>
                                                        </div>
                                                        <div id="collapsefour" aria-labelledby="headingfour" data-parent="#accordionMainone" class="collapse show">
                                                            <div class="card-body" table-border-style" style="overflow: auto; cursor:pointer;">
                                                                <div class="d-flex justify-content-between m-b-10">
                                                                    <form class="form-material">
                                                                        <div class="form-group form-primary" style="width:280px;">
                                                                            <input type="text" name="footer-email" class="form-control">
                                                                            <span class="form-bar"></span>
                                                                            <label class="float-label"><i class="fa fa-search m-r-10"></i>Search</label>
                                                                        </div>
                                                                    </form>
                                                                </div>
                                                                <div class="table-border-style">
                                                                    <div class="table-responsive">
                                                                        <table class="table">
                                                                            <thead>
                                                                                <tr>
                                                                                    <th><button class="srt-btn" type="button" aria-label="credentials-name">Credentials Name</button></th>
                                                                                    <th><button class="srt-btn" type="button" aria-label="client-Id">Client ID</button></th>
                                                                                    <th><button class="srt-btn" type="button" aria-label="user-name">User Name</button></th>
                                                                                    <th><button class="srt-btn" type="button" aria-label="fare-types">Fare Types</button></th>
                                                                                    <th><button class="srt-btn" type="button" aria-label="Status">Status</button></th>
                                                                                </tr>
                                                                            </thead>
                                                                            <tbody>
                                                                                <tr data-toggle="modal" data-target="#supplierHotelOne">
                                                                                    <td title="JW DEL SME">TBO Hotel</td>
                                                                                    <td title="" onclick="location.href='edit-emailconfig.html';">cf926979-cc6a-40b2-8629-24932de8afc7 </td>
                                                                                    <td title="SMEMTR0007">DELJ388</td>
                                                                                    <td title="SME"> Corporate Fare... </td>
                                                                                    <td>
                                                                                        <label class="switch m-l-5" style=" vertical-align: -webkit-baseline-middle;">
                                                                                            <input type="checkbox" checked>
                                                                                            <span class="slider round"></span>
                                                                                        </label>
                                                                                    </td>
                                                                                </tr>
                                                                            </tbody>
                                                                        </table>
                                                                    </div>
                                                                </div>
                                                                <div class="d-flex justify-content-between pagination-section" style="border-top: #dee2e6 1px solid; padding-top: 15px;">
                                                                    <span class="pagination-info">
                                                                        Showing 1-1 of 1
                                                                    </span>
                                                                    <div class="float-right pagination">
                                                                        <span class="m-t-5 m-r-5">Items per page:</span>
                                                                        <select class="form-select form-select-sm">
                                                                            <option selected>5</option>
                                                                            <option>10</option>
                                                                            <option>25</option>
                                                                            <option>100</option>
                                                                        </select>
                                                                        <ul class="pagination">
                                                                            <li class="page-item page-pre"><a class="page-link" aria-label="previous page" href="javascript:void(0)">‹</a></li>
                                                                            <li class="page-item active"><a class="page-link" aria-label="to page 1" href="javascript:void(0)">0</a></li>
                                                                            <li class="page-item page-next"><a class="page-link" aria-label="next page" href="javascript:void(0)">›</a></li>
                                                                        </ul>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- End -->
                                            </div>
                                        </div>
                                    </div>
                                    <div class="supplier-content" style="display: none;">
                                        <h5 class="m-b-10">
                                            <a href="supplieranddealcodes.html" style="position: relative; z-index: 10;"><i class="fa fa-arrow-left mr-2" aria-hidden="true" style="vertical-align: text-top;"></i></a>Add New Supplier for Flights
                                        </h5>
                                        <div class="text-center m-t-10">
                                            <img class="img-fluid" src="assets/images/no-data-img.png" alt="image">
                                            <div>No data found, please add new record</div>
                                            <div><button class="btn sml-btn-danger waves-effect waves-light">+ Add New</button></div>
                                        </div>
                                    </div>


                                </div>
                                <div class="tab-pane" id="bus1" role="tabpanel">
                                    <div class="text-center m-t-10">
                                        <img class="img-fluid" src="assets/images/no-data-img.png" alt="image">
                                        <div>No data found, please add new record</div>
                                        <div><button class="btn sml-btn-danger waves-effect waves-light">+ Add New</button></div>
                                    </div>
                                </div>

                                <div class="tab-pane" id="visa1" role="tabpanel">
                                    <div class="text-center m-t-10">
                                        <img class="img-fluid" src="assets/images/no-data-img.png" alt="image">
                                        <div>No data found, please add new record</div>
                                        <div><button class="btn sml-btn-danger waves-effect waves-light">+ Add New</button></div>
                                    </div>
                                </div>
                                <div class="tab-pane" id="forex1" role="tabpanel">
                                    <div class="text-center m-t-10">
                                        <img class="img-fluid" src="assets/images/no-data-img.png" alt="image">
                                        <div>No data found, please add new record</div>
                                        <div><button class="btn sml-btn-danger waves-effect waves-light">+ Add New</button></div>
                                    </div>
                                </div>

                                <div class="tab-pane" id="insurances1" role="tabpanel">
                                    <div class="text-center m-t-10">
                                        <img class="img-fluid" src="assets/images/no-data-img.png" alt="image">
                                        <div>No data found, please add new record</div>
                                        <div><button class="btn sml-btn-danger waves-effect waves-light">+ Add New</button></div>
                                    </div>
                                </div>

                                <div class="tab-pane" id="rail1" role="tabpanel">
                                    <div class="text-center m-t-10">
                                        <img class="img-fluid" src="assets/images/no-data-img.png" alt="image">
                                        <div>No data found, please add new record</div>
                                        <div><button class="btn sml-btn-danger waves-effect waves-light">+ Add New</button></div>
                                    </div>
                                </div>
                                <!--  Suppliers manage end -->
                            </div>
                        </div>
                        <!-- Page-body end -->
                    </div>
                </div>
            </div>
        </div>
        <div class="tab-pane" id="assignstaffUpdate" role="tabpanel">
            <div class="pcoded-inner-content">
                <form class="card-block" asp-controller="OrganizationStructure" asp-action="ManageStaff" method="post">
                    <input type="hidden" name="UpdateManageStaff" value="UpdateStaff">
                    <input type="hidden" name="LegalEntityCode" value="@ViewBag.LegalEntitySubCode">
                    <input type="hidden" name="LegalEntityCodeParent" value="@ViewBag.LegalEntityCode">
                    <input type="hidden" name="LegalEntityName" value="@ViewBag.LegalEntityName" />
                    <input type="hidden" name="IdLegal" value="@ViewBag.Id" />
                    <div class="form-group form-primary col-md-3 U-select">
                        <div class="dropdown" data-field="KeyAccountManager">
                        <div class="m-b-15" style="font-size:13px;">Key Account Managers</div>
                        <div class="m-l-10 m-b-10" onclick="toggleDropdown(event)">
                            <i class="fa fa-user-plus m-r-10" aria-hidden="true" style="color: #0e93d8;"></i> Select Managers
                        </div>
                        <div class="selected-items"></div>
                        <div class="dropdown-list">
                            @if (Model.InternalUsers != null)
                            {
                                foreach (var user in Model.InternalUsers)
                                {
                                    var fullName = $"{user.FirstName} {user.LastName}";
                                    <div class="dropdown-item employee-item"
                                         data-user-id="@user.UserID"
                                         data-employee-id="@user.EmpId"
                                         onclick="selectItem(event)">
                                        <img class="m-r-10" loading="lazy" src="../assets/images/login-img.svg" style="height:34px;">
                                        @user.UserID - @fullName
                                    </div>
                                }
                            }
                        </div>
                        <input type="hidden" name="KeyAccountManager" id="KeyAccountManager" />
                    </div>


                    </div>
                    @{
                        var AccountManager =
                        (Model?.BookingConsultants?.KeyAccountManagerNames?.Split(',') ?? Array.Empty<string>())
                        .Select(x => x.Trim())
                        .Where(x => !string.IsNullOrWhiteSpace(x))
                        .ToList();
                    }
                    <div id="consultant-tags">
                        @foreach (var Account in AccountManager)
                        {
                            <span class="tag">
                                <span>@Account</span>
                                <button type="button" class="remove-btn">×</button>
                            </span>
                        }
                    </div>
                    <div class="m-b-15" style="border-top: 1px solid #dee2e6;"></div>
                    <div class="form-group form-primary col-md-3 U-select">
                        <div class="dropdown" data-field="SalesSpoc">
                        <div class="m-b-15" style="font-size:13px;">Sales Spoc</div>
                        <div class="m-l-10 m-b-10" onclick="toggleDropdown(event)">
                            <i class="fa fa-user-plus m-r-10" aria-hidden="true" style="color: #0e93d8;"></i> Assign Sales Spoc
                        </div>
                        <div class="selected-items"></div>
                        <div class="dropdown-list">
                            @if (Model.InternalUsers != null)
                            {
                                foreach (var user in Model.InternalUsers)
                                {
                                    var fullName = $"{user.FirstName} {user.LastName}";
                                    <div class="dropdown-item employee-item"
                                         data-user-id="@user.UserID"
                                         data-employee-id="@user.EmpId"
                                         onclick="selectItem(event)">
                                        <img class="m-r-10" loading="lazy" src="../assets/images/login-img.svg" style="height:34px;">
                                        @user.UserID - @fullName
                                    </div>
                                }
                            }
                        </div>
                        <input type="hidden" name="SalesSpoc" id="SalesSpoc" />
                    </div>
              
                    </div>
                    @{
                        var SalesSpocList =
                        (Model?.BookingConsultants?.SalesSpocNames?.Split(',') ?? Array.Empty<string>())
                        .Select(x => x.Trim())
                        .Where(x => !string.IsNullOrWhiteSpace(x))
                        .ToList();
                    }
                    <div id="consultant-tags">
                        @foreach (var SalesSpoc in SalesSpocList)
                        {
                            <span class="tag">
                                <span>@SalesSpoc</span>
                                <button type="button" class="remove-btn">×</button>
                            </span>
                        }
                    </div>
                    <div class="m-b-15" style="border-top: 1px solid #dee2e6;"></div>
                    <div class="form-group form-primary col-md-3 U-select">
                        <div class="dropdown" data-field="BookingConsultant">
                            <div class="m-b-15" style="font-size:13px;">Booking Consultant(s)</div>
                            <div class="m-l-10 m-b-10" onclick="toggleDropdown(event)">
                                <i class="fa fa-user-plus m-r-10" aria-hidden="true" style="color: #0e93d8;"></i> Booking Consultant
                            </div>
                            <div class="selected-items"></div>
                            <div class="dropdown-list">
                                @if (Model.InternalUsers != null)
                                {
                                    foreach (var vny in Model.InternalUsers)
                                    {
                                        var fullName = $"{vny.FirstName} {vny.LastName}";
                                        <div class="dropdown-item" onclick="selectItem(event)"
                                             data-employee-id="@vny.EmpId" data-user-id="@vny.UserID">
                                            <img class="m-r-10" loading="lazy" src="../assets/images/login-img.svg" style="height:34px;">
                                            @vny.UserID - @fullName
                                        </div>
                                    }
                                }
                            </div>
                            <input type="hidden" name="BookingConsultant" id="BookingConsultant" />
                        </div>

                    </div>
                    @{
                        var consultantList =
                        (Model?.BookingConsultants?.BookingConsultantNames?.Split(',') ?? Array.Empty<string>())
                        .Select(x => x.Trim())
                        .Where(x => !string.IsNullOrWhiteSpace(x))
                        .ToList();
                    }
                    <div id="consultant-tags">
                        @foreach (var consultant in consultantList)
                        {
                            <span class="tag">
                                <span>@consultant</span>
                                <button type="button" class="remove-btn">×</button>
                            </span>
                        }
                    </div>
                    <div class="m-b-15" style="border-top: 1px solid #dee2e6;"></div>
                    <div class="form-group form-primary col-md-3 U-select">
                        <div class="dropdown" data-field="EmergencyContact">
                            <div class="m-b-15" style="font-size:13px;">Emergency Contact Person</div>
                            <div class="m-l-10 m-b-10" onclick="toggleDropdown(event)">
                                <i class="fa fa-user-plus m-r-10" aria-hidden="true" style="color: #0e93d8;"></i> Assaign Emergency Contact Person
                            </div>
                            <div class="selected-items"></div>
                            <div class="dropdown-list">
                                @if(Model.InternalUsers != null)
                                {
                                    foreach (var user in Model.InternalUsers)
                                    {
                                        var fullName = $"{user.FirstName} {user.LastName}";
                                        <div class="dropdown-item employee-item"
                                             data-user-id="@user.UserID"
                                             data-employee-id="@user.EmpId"
                                             onclick="selectItem(event)">
                                            <img class="m-r-10" loading="lazy" src="../assets/images/login-img.svg" style="height:34px;">
                                            @user.UserID - @fullName
                                        </div>
                                    }
                                }
                            </div>


                            <input type="hidden"  name="EmergencyContact"  id="EmergencyContact" />
                        </div>
                    </div>
                   

                    <div class="m-b-15" style="border-top: 1px solid #dee2e6;"></div>
                    <div class="form-group form-primary col-md-3 U-select">
                        <div class="dropdown" data-field="UserGroup">
                            <div class="m-b-15" style="font-size:13px;">User Group</div>
                            <div class="m-l-10 m-b-10" onclick="toggleDropdown(event)">
                                <i class="fa fa-user-plus m-r-10" aria-hidden="true" style="color: #0e93d8;"></i> User Group
                            </div>
                            <div class="selected-items"></div>
                            <div class="dropdown-list">
                                <div class="dropdown-item" onclick="selectItem(event)"><img class="m-r-10" loading="lazy" src="../assets/images/login-img.svg" style="height:34px;">Fc Support</div>
                                <div class="dropdown-item" onclick="selectItem(event)"><img class="m-r-10" loading="lazy" src="../assets/images/login-img.svg" style="height:34px;">Satish Bhatti</div>
                                <div class="dropdown-item" onclick="selectItem(event)"><img class="m-r-10" loading="lazy" src="../assets/images/login-img.svg" style="height:34px;">Shalini Sharma</div>
                                <div class="dropdown-item" onclick="selectItem(event)"><img class="m-r-10" loading="lazy" src="../assets/images/login-img.svg" style="height:34px;">Rahul Gaur</div>
                                <div class="dropdown-item" onclick="selectItem(event)"><img class="m-r-10" loading="lazy" src="../assets/images/login-img.svg" style="height:34px;">Amit Kumar</div>
                                <div class="dropdown-item" onclick="selectItem(event)"><img class="m-r-10" loading="lazy" src="../assets/images/login-img.svg" style="height:34px;">Amit Kumar</div>
                                <div class="dropdown-item" onclick="selectItem(event)"><img class="m-r-10" loading="lazy" src="../assets/images/login-img.svg" style="height:34px;">Manoj Jha</div>
                                <div class="dropdown-item" onclick="selectItem(event)"><img class="m-r-10" loading="lazy" src="../assets/images/login-img.svg" style="height:34px;">Adhar Budhraja</div>
                                <div class="dropdown-item" onclick="selectItem(event)"><img class="m-r-10" loading="lazy" src="../assets/images/login-img.svg" style="height:34px;">Yatin Kumar</div>
                                <div class="dropdown-item" onclick="selectItem(event)"><img class="m-r-10" loading="lazy" src="../assets/images/login-img.svg" style="height:34px;">Sona Shah</div>
                            </div>
                            <input type="hidden" name="UserGroup" id="UserGroup" />
                        </div>
                    </div>
                    <div class="form-group form-primary col-md-12 m-l-5">
                        <button type="submit" class="btn btn-primary waves-effect waves-light">Update</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<div class="col-md-12 text-right mt-4" style="border-top: #ddd 1px solid; padding-top: 20px;">
    <button type="button" class="btn btn-close btn-danger waves-effect waves-light btn-lg" data-dismiss="modal">
        Cancel
    </button>
</div>


<link rel="stylesheet" type="text/css" href="~/assets/css/select2.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="~/assets/js/custom/officeupdatejs.js"></script>
<style>
    .tag {
        display: inline-block;
        background-color: #f0f0f0;
        border-radius: 20px;
        padding: 2px 8px;
        margin: 4px;
        font-size: 12px;
    }

    .remove-btn {
        background: none;
        border: none;
        color: #000;
        margin-left: 8px;
        font-weight: bold;
        cursor: pointer;
    }


    .pw-eye {
        background-repeat: no-repeat;
        background-position: right 10px center;
        background-size: 20px 20px;
        padding-right: 2.6rem;
        cursor: text;
    }
</style>